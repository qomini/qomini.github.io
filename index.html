<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTK Damage Calculator</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>OTK Damage Calculator</h1>
            <p class="subtitle">Calculate spell damage for your character</p>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
                <span class="theme-icon">ðŸŒ™</span>
            </button>
        </header>

        <main>
            <div class="calculator-wrapper">
                <!-- Mode Toggles -->
                <section class="mode-toggle-section">
                    <!-- PvE/PvP Toggle -->
                    <div class="mode-toggle-group">
                        <label class="mode-toggle-label">Game Mode:</label>
                        <div class="mode-toggle">
                            <label class="mode-label">
                                <input type="radio" name="gameMode" value="pve" checked>
                                <span>PvE</span>
                            </label>
                            <label class="mode-label disabled" title="PvP formulas not yet implemented">
                                <input type="radio" name="gameMode" value="pvp" disabled>
                                <span>PvP (Coming Soon)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Comparison Mode Toggle -->
                    <div class="mode-toggle-group">
                        <label class="mode-toggle-label">Comparison Mode:</label>
                        <div class="mode-toggle">
                            <label class="mode-label">
                                <input type="radio" name="comparisonMode" value="off" checked>
                                <span>OFF</span>
                            </label>
                            <label class="mode-label">
                                <input type="radio" name="comparisonMode" value="on">
                                <span>ON</span>
                            </label>
                        </div>
                    </div>
                </section>

                <!-- Before/After Tab Switcher (hidden by default) -->
                <section id="scenarioTabs" class="scenario-tabs" style="display: none;">
                    <button type="button" class="scenario-tab active" data-scenario="before">Before</button>
                    <button type="button" class="scenario-tab" data-scenario="after">After</button>
                </section>

                <form id="statsForm" class="stats-form">
                    <!-- Character Stats Section -->
                    <section class="form-section">
                        <h2>Character Stats</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="class">Class</label>
                                <select id="class" required>
                                    <option value="">Select Class</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="level">Level</label>
                                <select id="level" required>
                                    <option value="">Select Level</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="vita">Vita</label>
                                <input type="text" id="vita" placeholder="0" inputmode="numeric">
                            </div>
                            
                            <div class="form-group">
                                <label for="mana">Mana</label>
                                <input type="text" id="mana" placeholder="0" inputmode="numeric">
                            </div>
                        </div>

                        <div class="form-row form-row-3">
                            <div class="form-group">
                                <label for="dam">Dam</label>
                                <input type="number" id="dam" min="0" max="255" placeholder="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="hit">Hit</label>
                                <input type="number" id="hit" min="0" max="255" placeholder="0">
                            </div>
                        </div>

                        <div class="form-row form-row-3">
                            <div class="form-group">
                                <label for="might">Might</label>
                                <input type="number" id="might" min="0" max="255" placeholder="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="will">Will</label>
                                <input type="number" id="will" min="0" max="255" placeholder="0">
                            </div>

                            <div class="form-group">
                                <label for="grace">Grace</label>
                                <input type="number" id="grace" min="0" max="255" placeholder="0">
                            </div>
                        </div>

                        <!-- Buffs Subsection -->
                        <div class="subsection-header">
                            <h3>
                                Buffs
                                <button type="button" class="section-toggle" data-target="buffsContent">
                                    <span class="toggle-icon">â–¼</span>
                                </button>
                            </h3>
                        </div>
                        <div id="buffsContent" class="collapsible-content">
                            <div id="buffsGrid" class="effects-grid">
                                <!-- Buffs will be populated by JavaScript -->
                            </div>
                        </div>
                    </section>

                    <!-- Target Stats Section -->
                    <section class="form-section">
                        <h2>Target Stats</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="targetAC">Target AC</label>
                                <input type="number" id="targetAC" min="-127" max="100" placeholder="0" title="Positive AC = more damage, Negative AC = less damage (max -80 effective)">
                            </div>
                        </div>

                        <!-- Boss Toggle (PvE only) -->
                        <div class="form-row" id="bossToggleRow">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="isBoss" checked>
                                    <span>Target is Boss</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="targetVita">Target Vita</label>
                                <input type="text" id="targetVita" placeholder="0" inputmode="numeric">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="targetMana">Target Mana</label>
                                <input type="text" id="targetMana" placeholder="0" inputmode="numeric">
                            </div>
                        </div>

                        <!-- Debuffs Subsection -->
                        <div class="subsection-header">
                            <h3>
                                Debuffs
                                <button type="button" class="section-toggle" data-target="debuffsContent">
                                    <span class="toggle-icon">â–¼</span>
                                </button>
                            </h3>
                        </div>
                        <div id="debuffsContent" class="collapsible-content">
                            <div id="debuffsGrid" class="effects-grid">
                                <!-- Debuffs will be populated by JavaScript -->
                            </div>
                        </div>
                    </section>

                    <button type="button" id="calculateBtn" class="calculate-btn">Calculate Damage</button>
                </form>

                <!-- Results Section -->
                <section class="results-section">
                    <h2>Spell Damage</h2>
                    <div id="results" class="results">
                        <p class="no-results">Enter your stats and click Calculate to see spell damage.</p>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>Formulas pulled from wiki - OriginalTK.com</p>
            <p>Accuracy not guaranteed ðŸ˜…</p>
        </footer>
    </div>

    <!-- Load JavaScript files in correct order -->
    <script src="js/data/classes.js"></script>
    <script src="js/data/spells.js"></script>
    <script src="js/data/effects.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
